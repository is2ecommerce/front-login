<div class="register-container">
  <!-- Left Side - Gradient Panel -->
  <div class="gradient-panel">
    <div class="gradient-content">
      <h1>Únete a nosotros</h1>
      <p>Crea tu cuenta y disfruta de los mejores productos y ofertas exclusivas</p>
      <div class="step-indicator">
        <div class="step" [class.active]="currentStep() >= 1" [class.completed]="currentStep() > 1">
          <span>1</span>
          <p>Personal</p>
        </div>
        <div class="step-line" [class.completed]="currentStep() > 1"></div>
        <div class="step" [class.active]="currentStep() >= 2" [class.completed]="currentStep() > 2">
          <span>2</span>
          <p>Dirección</p>
        </div>
        <div class="step-line" [class.completed]="currentStep() > 2"></div>
        <div class="step" [class.active]="currentStep() >= 3">
          <span>3</span>
          <p>Cuenta</p>
        </div>
      </div>
      <div class="decorative-circles">
        <div class="circle circle-1"></div>
        <div class="circle circle-2"></div>
        <div class="circle circle-3"></div>
      </div>
    </div>
  </div>

  <!-- Right Side - Register Form -->
  <div class="form-panel">
    <div class="form-container">
      <div class="form-header">
        <h2>Crear cuenta</h2>
        <p>Paso {{ currentStep() }} de 3</p>
      </div>

      <!-- Error Messages -->
      <div *ngIf="errors().length > 0" class="error-box">
        <svg class="error-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="8" x2="12" y2="12"></line>
          <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>
        <div class="errors-list">
          <p *ngFor="let error of errors()">{{ error }}</p>
        </div>
      </div>

      <form (ngSubmit)="onSubmit()" class="register-form">
        
        <!-- Step 1: Personal Data -->
        <div class="form-step" *ngIf="currentStep() === 1">
          <div class="form-row">
            <div class="form-group">
              <label for="firstName" class="form-label">Nombre</label>
              <div class="input-wrapper">
                <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
                <input
                  type="text"
                  id="firstName"
                  class="form-input"
                  placeholder="Juan"
                  [(ngModel)]="firstName"
                  (ngModelChange)="firstName.set($event)"
                  name="firstName"
                />
              </div>
            </div>
            <div class="form-group">
              <label for="lastName" class="form-label">Apellido</label>
              <div class="input-wrapper">
                <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
                <input
                  type="text"
                  id="lastName"
                  class="form-input"
                  placeholder="Pérez"
                  [(ngModel)]="lastName"
                  (ngModelChange)="lastName.set($event)"
                  name="lastName"
                />
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="email" class="form-label">Correo electrónico</label>
            <div class="input-wrapper">
              <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                <polyline points="22,6 12,13 2,6"></polyline>
              </svg>
              <input
                type="email"
                id="email"
                class="form-input"
                placeholder="juan@ejemplo.com"
                [(ngModel)]="email"
                (ngModelChange)="email.set($event)"
                name="email"
              />
            </div>
          </div>

          <div class="form-group">
            <label for="phone" class="form-label">Teléfono</label>
            <div class="input-wrapper">
              <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
              </svg>
              <input
                type="tel"
                id="phone"
                class="form-input"
                placeholder="+57 300 123 4567"
                [(ngModel)]="phone"
                (ngModelChange)="phone.set($event)"
                name="phone"
              />
            </div>
          </div>
        </div>

        <!-- Step 2: Address Data -->
        <div class="form-step" *ngIf="currentStep() === 2">
          <div class="form-group">
            <label for="address" class="form-label">Dirección</label>
            <div class="input-wrapper">
              <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
              <input
                type="text"
                id="address"
                class="form-input"
                placeholder="Calle Principal 123, Apartamento 4B"
                [(ngModel)]="address"
                (ngModelChange)="address.set($event)"
                name="address"
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="city" class="form-label">Ciudad</label>
              <div class="input-wrapper">
                <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="9" y1="3" x2="9" y2="21"></line>
                  <line x1="15" y1="3" x2="15" y2="21"></line>
                </svg>
                <input
                  type="text"
                  id="city"
                  class="form-input"
                  placeholder="Bogotá"
                  [(ngModel)]="city"
                  (ngModelChange)="city.set($event)"
                  name="city"
                />
              </div>
            </div>
            <div class="form-group">
              <label for="state" class="form-label">Departamento</label>
              <div class="input-wrapper">
                <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 0 19.8 4.3M22 11.5a10 10 0 0 0-19.8-4.2"></path>
                </svg>
                <input
                  type="text"
                  id="state"
                  class="form-input"
                  placeholder="Cundinamarca"
                  [(ngModel)]="state"
                  (ngModelChange)="state.set($event)"
                  name="state"
                />
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="zipCode" class="form-label">Código postal</label>
              <div class="input-wrapper">
                <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="2" y="4" width="20" height="16" rx="2" ry="2"></rect>
                  <path d="M7 9h10M7 13h10"></path>
                </svg>
                <input
                  type="text"
                  id="zipCode"
                  class="form-input"
                  placeholder="110111"
                  [(ngModel)]="zipCode"
                  (ngModelChange)="zipCode.set($event)"
                  name="zipCode"
                />
              </div>
            </div>
            <div class="form-group">
              <label for="country" class="form-label">País</label>
              <div class="input-wrapper">
                <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <path d="M2 12h20"></path>
                  <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                </svg>
                <input
                  type="text"
                  id="country"
                  class="form-input"
                  [value]="country()"
                  disabled
                  name="country"
                />
              </div>
            </div>
          </div>
        </div>

        <!-- Step 3: Account Data -->
        <div class="form-step" *ngIf="currentStep() === 3">
          <div class="form-group">
            <label for="password" class="form-label">Contraseña</label>
            <div class="input-wrapper">
              <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
              </svg>
              <input
                [type]="showPassword() ? 'text' : 'password'"
                id="password"
                class="form-input"
                placeholder="••••••••"
                [(ngModel)]="password"
                (ngModelChange)="password.set($event)"
                name="password"
              />
              <button
                type="button"
                class="visibility-toggle"
                (click)="togglePasswordVisibility()"
                tabindex="-1"
              >
                <svg *ngIf="!showPassword()" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                <svg *ngIf="showPassword()" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                  <line x1="1" y1="1" x2="23" y2="23"></line>
                </svg>
              </button>
            </div>
            <p class="password-hint">Mínimo 8 caracteres</p>
          </div>

          <div class="form-group">
            <label for="confirmPassword" class="form-label">Confirmar contraseña</label>
            <div class="input-wrapper">
              <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
              </svg>
              <input
                [type]="showConfirmPassword() ? 'text' : 'password'"
                id="confirmPassword"
                class="form-input"
                placeholder="••••••••"
                [(ngModel)]="confirmPassword"
                (ngModelChange)="confirmPassword.set($event)"
                name="confirmPassword"
              />
              <button
                type="button"
                class="visibility-toggle"
                (click)="toggleConfirmPasswordVisibility()"
                tabindex="-1"
              >
                <svg *ngIf="!showConfirmPassword()" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                <svg *ngIf="showConfirmPassword()" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                  <line x1="1" y1="1" x2="23" y2="23"></line>
                </svg>
              </button>
            </div>
          </div>

          <div class="form-group checkbox-group">
            <input
              type="checkbox"
              id="acceptTerms"
              class="checkbox-input"
              [(ngModel)]="acceptTerms"
              (ngModelChange)="acceptTerms.set($event)"
              name="acceptTerms"
            />
            <label for="acceptTerms" class="checkbox-label">
              Acepto los <a href="#terms">términos y condiciones</a> y la <a href="#privacy">política de privacidad</a>
            </label>
          </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="button-group">
          <button
            type="button"
            class="back-button"
            *ngIf="currentStep() > 1"
            (click)="goToPreviousStep()"
          >
            ← Atrás
          </button>
          <button
            type="button"
            class="next-button"
            *ngIf="currentStep() < 3"
            (click)="goToNextStep()"
          >
            Siguiente →
          </button>
          <button
            type="submit"
            class="submit-button"
            *ngIf="currentStep() === 3"
            [disabled]="isLoading()"
            [class.loading]="isLoading()"
          >
            <span *ngIf="!isLoading()">Crear cuenta</span>
            <span *ngIf="isLoading()">
              <span class="spinner"></span> Registrando...
            </span>
          </button>
        </div>
      </form>

      <!-- Login Link -->
      <div class="login-link">
        <p>¿Ya tienes cuenta? <a routerLink="/login">Inicia sesión aquí</a></p>
      </div>
    </div>
  </div>
</div>
